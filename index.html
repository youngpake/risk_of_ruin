<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EZEKG4NH17"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-EZEKG4NH17');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk of Ruin Simulator | Advanced Trading Calculator</title>
    <meta name="description" content="Calculate your risk of ruin, drawdown probabilities, and simulate equity curves with our advanced trading risk calculator.">
    
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    
    <link rel="preload" href="style.css" as="style">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" media="print" onload="this.media='all'">
    
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    </noscript>
    
    <style>
        /* Inline critical CSS */
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    </style>
    
    <link rel="canonical" href="https://yourdomain.com/risk-of-ruin-simulator">
</head>
<body>
    <div class="info-buttons">
        <button id="infoButton" class="info-button" title="What is Risk of Ruin?">
            <i class="bi bi-info-circle"></i>
        </button>
        <button id="disclaimerButton" class="info-button" title="Disclaimer">
            <i class="bi bi-exclamation-triangle"></i>
        </button>
        <button id="themeToggle" class="info-button" title="Toggle Dark/Light Mode">
            <i class="bi bi-moon-fill"></i>
        </button>
    </div>


    <div class="container">
        <h1>Risk of Ruin Simulator</h1>
        
        <dialog id="infoDialog">
            <h2>What is Risk of Ruin?</h2>
            <p>Risk of Ruin (RoR) is the probability that a trader will lose all of their trading capital. It takes into account factors such as win rate, risk per trade, and reward-to-risk ratio. Understanding your RoR is crucial for developing a sustainable trading strategy and managing your overall risk.</p>
            <button class="close-dialog">Close</button>
        </dialog>
        
        <dialog id="disclaimerDialog">
            <h2>Disclaimer</h2>
            <p>This Risk of Ruin Simulator is for educational purposes only. The calculations and simulations provided are based on statistical models and do not guarantee future trading performance. Trading involves substantial risk of loss and is not suitable for all investors. Always consult with a qualified financial advisor before making any investment decisions.</p>
            <button class="close-dialog">Close</button>
        </dialog>

        <div class="calculator-container">
            <form id="rorForm">
                <label for="accountBalance">Starting Account Balance ($):</label>
                <input type="number" id="accountBalance" required min="1" step="0.01" value="1000">

                <label for="riskPerTrade">Risk per Trade (%):</label>
                <input type="number" id="riskPerTrade" required step="0.01" min="0" max="100" value="1">

                <label for="rewardPerTrade">Reward per Trade (%):</label>
                <input type="number" id="rewardPerTrade" required step="0.01" min="0" max="100" value="2">

                <label for="winRate">Win Rate (%):</label>
                <input type="number" id="winRate" required step="0.01" min="0" max="100" value="33">

                <label for="numberOfTrades">Number of Trades:</label>
                <input type="number" id="numberOfTrades" required min="1" value="1000" max="10000">

                <div id="loading-bar" class="loading-bar hidden">
                    <div class="loading-bar-progress"></div>
                </div>

                <button type="submit">Calculate</button>
            </form>
            <div id="result" class="hidden">
                <div class="results-container">
                    <div class="chart-container">
                        <canvas id="equityCurveChart"></canvas>
                    </div>
                    <table id="resultTable">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Results will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <p>&copy; <span id="currentYear"></span> <a href="https://github.com/youngpake" target="_blank" rel="noopener noreferrer">youngpake</a>. All rights reserved.</p>
    </footer>
    
    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
    <script src="index.js" async></script>

</body>
</html>